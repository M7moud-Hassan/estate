{% extends 'partials/base.html' %}
{% load static %}
{% load custom_filters %}
{% block title %}المشاريع{% endblock title %}

{% block extra_css %}
    <!-- Responsive Table css -->
    <link href="{% static 'libs/admin-resources/rwd-table/rwd-table.min.css'%}" rel="stylesheet" type="text/css">
{% endblock extra_css %}

{% block page_title %}
    {% include 'partials/drop_down_projects.html' with page_title=" التقارير" sub_title="تقارير المستخلصات" title="" projects=all_p  url=2 %}
    {% endblock page_title %}
{% block content %}
        <div class="row">
            <div class="col-12">
                <div class="card">
                    <div class="card-body">
                        <div class="table-rep-plugin">
                            <div class="table-responsive mb-0" data-bs-pattern="priority-columns" style="height: 800px;">
                                <table id="tech-companies-1" class="table table-striped" >
                                    <thead>
                                    <tr>
                                        <th data-priority="1">مستخلص رقم </th>
                                        <th data-priority="1">المهندس </th>
                                        <th data-priority="1"> قيمة المستخلص الفعلية</th>
                                        <th data-priority="1"> تاريخ المستخلص</th>
                                        <th data-priority="1"> التأميناتٍ</th>
                                        <th data-priority="1"> القوه العاملة</th>
                                        <th data-priority="1"> تسبة خصم الجمعية</th>
                                        <th data-priority="1"> نسبة البنك </th>
                                        <th data-priority="1"> تسبة الدمغة الهندسية  </th>
                                        <th data-priority="1"> ضمان الاعمال   </th>
                                        <th data-priority="1"> الضرائب   </th>
                                        <th data-priority="1"> استقطاعات اخري1   </th>
                                        <th data-priority="1"> استقطاعات اخري2 </th>
                                        <th data-priority="1"> ضريبة ارباح تجارية وصناعية </th>
                                        <th data-priority="1"> ضريبة القيمة المضافة </th>
                                        <th data-priority="1"> ضريبة شعبة الدمغة </th>
                                        <th data-priority="1"> صندوق تكريم الشهداء </th>
                                        <th data-priority="1"> ضريبة تنمية الموارد </th>
                                        <th data-priority="1"> 1% صندوق تحي مصر  </th>
                                        <th data-priority="1"> دمغة تطبيقية </th>
                                        <th data-priority="1"> اتحاد مقاولين </th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                  
                                        
                                        {% for mo in pro.mostakhlas.all %}
                                        <tr>
                                            <td>{{ forloop.counter }}</td>
                                            <td>{{mo.engineer_id.name}}</td>
                                            <td>{{mo.actual_extract_value}}</td>
                                            <td>{{mo.date_mostakhlas}}</td>
                                            <td>{{ mo.altaminat }}% | {{ altaminat|get_item_by_index:forloop.counter0 | floatformat:2}}</td>
                                            <td>{{mo.workforce}}% | {{ workforce|get_item_by_index:forloop.counter0  | floatformat:2 }}</td>
                                            <td>{{mo.Combined_discount_rate}}% | {{ Combined_discount_rate|get_item_by_index:forloop.counter0  | floatformat:2 }}</td>
                                            <td>{{mo.bank_ratio}}% | {{ bank_ratio|get_item_by_index:forloop.counter0  | floatformat:2 }}</td>
                                            <td>{{mo.engineering_stamp}}% | {{ engineering_stamp|get_item_by_index:forloop.counter0  | floatformat:2 }}</td>
                                            <td>{{mo.others}}% | {{ others|get_item_by_index:forloop.counter0 | floatformat:2 }}</td>
                                            <td>{{mo.taxes}}% | {{ taxes|get_item_by_index:forloop.counter0 | floatformat:2 }}</td>
                                            <td>{{mo.other_deductions_1}}% | {{ other_deductions_1|get_item_by_index:forloop.counter0  | floatformat:2 }}</td>
                                            <td>{{mo.other_deductions_2}}% | {{ other_deductions_2|get_item_by_index:forloop.counter0  | floatformat:2 }}</td>
                                            <td>{{mo.commercial_ndustrial_profits_tax}}% | {{ commercial_ndustrial_profits_tax|get_item_by_index:forloop.counter0  | floatformat:2 }}</td>
                                            <td>{{mo.value_added_tax}}% | {{ value_added_tax|get_item_by_index:forloop.counter0  | floatformat:2 }}</td>
                                            <td>{{mo.stamp_tax_division}}% | {{ stamp_tax_division|get_item_by_index:forloop.counter0  | floatformat:2 }}</td>
                                            <td>{{mo.martyrs_Honor_fund}}% | {{ martyrs_Honor_fund|get_item_by_index:forloop.counter0  | floatformat:2 }}</td>
                                            <td>{{mo.resource_development_tax}}% | {{ resource_development_tax|get_item_by_index:forloop.counter0  | floatformat:2 }}</td>
                                            <td>{{mo.long_Live_egypt_fund}}% | {{ long_Live_egypt_fund|get_item_by_index:forloop.counter0  | floatformat:2 }}</td>
                                            <td>{{mo.applied_tear}}% | {{ applied_tear|get_item_by_index:forloop.counter0  | floatformat:2 }}</td>
                                            <td>{{mo.union_of_two_sayings}}% | {{ union_of_two_sayings|get_item_by_index:forloop.counter0  | floatformat:2 }}</td>
                                        </tr>
                                        {% endfor %}
                                        <tr>
                                            <td>{{ forloop.counter }}</td>
                                            <td> المجموع</td>
                                            <td>{{mo.actual_extract_value}}</td>
                                            <td>{{mo.date_mostakhlas}}</td>
                                            <td>{{summ|get_item_by_index:6}}</td>
                                            <td>{{summ|get_item_by_index:0}}</td>
                                            <td>{{summ|get_item_by_index:1}}</td>
                                            <td>{{summ|get_item_by_index:2}}</td>
                                            <td>{{summ|get_item_by_index:3}}</td>
                                            <td>{{summ|get_item_by_index:4}}</td>
                                            <td>{{summ|get_item_by_index:5}}</td>
                                            <td>{{summ|get_item_by_index:7}}</td>
                                            <td>{{summ|get_item_by_index:9}}</td>
                                            <td>{{summ|get_item_by_index:10}}</td>
                                            <td>{{summ|get_item_by_index:11}}</td>
                                            <td>{{summ|get_item_by_index:12}}</td>
                                            <td>{{summ|get_item_by_index:13}}</td>
                                            <td>{{summ|get_item_by_index:14}}</td>
                                            <td>{{summ|get_item_by_index:15}}</td>
                                            <td>{{summ|get_item_by_index:16}}</td>
                                            <td>{{summ|get_item_by_index:17}}</td>
                                        </tr>
                                      
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div> <!-- end col -->
        </div> <!-- end row -->

{% endblock content %}

{% block extra_js %}
    <!-- Responsive Table js -->
    <script src="{% static 'libs/admin-resources/rwd-table/rwd-table.min.js'%}"></script>
    <!-- Init js -->
    <script src="{% static 'js/pages/table-responsive.init.js'%}"></script>
    <script src="{% static 'libs/table-edits/build/table-edits.min.js'%}"></script>
    <script src="{% static 'js/pages/table-editable.init.js'%}"></script>
{% endblock extra_js %}