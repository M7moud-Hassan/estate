{% extends 'partials/base.html' %}
{% load static %}
{% load custom_filters %}
{% block title %}المشاريع{% endblock title %}

{% block extra_css %}
<link href="{% static 'libs/datatables.net-buttons-bs4/css/buttons.bootstrap4.min.css'%}" rel="stylesheet" type="text/css">

    {% endblock extra_css %}

{% block page_title %}
    {% include 'partials/drop_down_projects.html' with page_title=" التقارير" sub_title="تقارير المستخلصات" title="" projects=all_p  url=2 %}
    {% endblock page_title %}
{% block content %}
   
                <div class="card">
                    <div class="card-body">
                        {% for mo in pro.mostakhlas.all %}
                        <table dir="rtl" id="datatable-buttons{{forloop.counter}}" class="datatable-buttons table table-striped table-bordered dt-responsive nowrap" style="border-collapse: collapse; border-spacing: 0; width: 100%;">
                            <thead>
                                <tr>
                                    <th>مستخلص رقم </th>
                                    <th>{{forloop.counter}}</th>
                                    <th></th>
                                    <th></th>
                                    <th></th>
                                    <th></th>

                                </tr>
                            </thead>


                            <tbody>
                           
                          
                           <tr>
                            <td>المهندس</td>
                            <td>{{mo.engineer_id.name}}</td>
                            <td></td>
                            <td>قيمة المستخلص الفعلية</td>
                            <td>{{mo.actual_extract_value}}</td>
                            <td></td>
                           </tr>
                           <tr>
                            <td>تاريخ المستخلص</td>
                            <td>{{mo.date_mostakhlas}}</td>
                            <td></td>
                            <td>التأميناتٍ</td>
                            <td>{{ mo.altaminat }}%</td>
                            <td> {{ altaminat|get_item_by_index:forloop.counter0 | floatformat:2}}</td>
                           </tr>
                           <tr>
                            <td>القوه العاملة</td>
                            <td>{{mo.workforce}}%</td>
                            <td>{{ workforce|get_item_by_index:forloop.counter0  | floatformat:2 }}</td>
                            <td>تسبة خصم الجمعية</td>
                            <td>{{mo.Combined_discount_rate}}%</td>
                            <td>{{ Combined_discount_rate|get_item_by_index:forloop.counter0  | floatformat:2 }}</td>
                           </tr>
                           <tr>
                            <td>نسبة البنك</td>
                            <td>{{mo.bank_ratio}}%</td>
                            <td>{{ bank_ratio|get_item_by_index:forloop.counter0  | floatformat:2 }}</td>
                            <td>تسبة الدمغة الهندسية</td>
                            <td>{{mo.engineering_stamp}}%</td>
                            <td>{{ engineering_stamp|get_item_by_index:forloop.counter0  | floatformat:2 }}</td>
                           </tr>
                           <tr>
                            <td>ضمان الاعمال</td>
                            <td>{{mo.others}}%</td>
                            <td>{{ others|get_item_by_index:forloop.counter0 | floatformat:2 }}</td>
                            <td>الضرائب</td>
                            <td>{{mo.taxes}}%</td>
                            <td>{{ taxes|get_item_by_index:forloop.counter0 | floatformat:2 }}</td>
                           </tr>
                           <tr>
                            <td>استقطاعات اخري1</td>
                            <td>{{mo.other_deductions_1}}%</td>
                            <td>{{ other_deductions_1|get_item_by_index:forloop.counter0  | floatformat:2 }}</td>
                            <td>استقطاعات اخري2</td>
                            <td>{{mo.other_deductions_2}}%</td>
                            <td>{{ other_deductions_2|get_item_by_index:forloop.counter0  | floatformat:2 }}</td>
                           </tr>
                           <tr>
                            <td>ضريبة ارباح تجارية وصناعية</td>
                            <td>{{mo.commercial_ndustrial_profits_tax}}%</td>
                            <td>{{ commercial_ndustrial_profits_tax|get_item_by_index:forloop.counter0  | floatformat:2 }}</td>
                            <td>ضريبة القيمة المضافة</td>
                            <td>{{mo.value_added_tax}}% </td>
                            <td>{{ value_added_tax|get_item_by_index:forloop.counter0  | floatformat:2 }}</td>
                           </tr>
                           <tr>
                            <td>ضريبة شعبة الدمغة</td>
                            <td>{{mo.stamp_tax_division}}%</td>
                            <td>{{ stamp_tax_division|get_item_by_index:forloop.counter0  | floatformat:2 }}</td>
                            <td>صندوق تكريم الشهداء</td>
                            <td>{{mo.martyrs_Honor_fund}}%</td>
                            <td>{{ martyrs_Honor_fund|get_item_by_index:forloop.counter0  | floatformat:2 }}</td>
                           </tr>
                           <tr>
                            <td>ضريبة تنمية الموارد</td>
                            <td>{{mo.resource_development_tax}}%</td>
                            <td> {{ resource_development_tax|get_item_by_index:forloop.counter0  | floatformat:2 }}</td>
                            <td>1% صندوق تحي مصر </td>
                            <td>{{mo.long_Live_egypt_fund}}%</td>
                            <td> {{ long_Live_egypt_fund|get_item_by_index:forloop.counter0  | floatformat:2 }}</td>
                           </tr>
                           <tr>
                            <td>دمغة تطبيقية</td>
                            <td>{{mo.applied_tear}}%</td>
                            <td>{{ applied_tear|get_item_by_index:forloop.counter0  | floatformat:2 }}</td>
                            <td>اتحاد مقاولين</td>
                            <td>{{mo.union_of_two_sayings}}%</td>
                            <td>{{ union_of_two_sayings|get_item_by_index:forloop.counter0  | floatformat:2 }}</td>
                           </tr>
                           
                            </tbody>
                        </table>
                        {% endfor %}
                            </div>
                </div>

{% endblock content %}

{% block extra_js %}
<script src="{% static 'libs/datatables.net/js/jquery.dataTables.min.js'%}"></script>
<script src="{% static 'libs/datatables.net-bs4/js/dataTables.bootstrap4.min.js'%}"></script>
<!-- Buttons examples -->
<script src="{% static 'libs/datatables.net-buttons/js/dataTables.buttons.min.js'%}"></script>
<script src="{% static 'libs/datatables.net-buttons-bs4/js/buttons.bootstrap4.min.js'%}"></script>
<script src="{% static 'libs/jszip/dist/jszip.min.js'%}"></script>
<script src="{% static 'libs/pdfmake/build/pdfmake.min.js'%}"></script>
<script src="{% static 'libs/pdfmake/build/vfs_fonts.js'%}"></script>
<script src="{% static 'libs/datatables.net-buttons/js/buttons.html5.min.js'%}"></script>
<script src="{% static 'libs/datatables.net-buttons/js/buttons.print.min.js'%}"></script>
<script src="{% static 'libs/datatables.net-buttons/js/buttons.colVis.min.js'%}"></script>
<!-- Responsive examples -->
<script src="{% static 'libs/datatables.net-responsive/js/dataTables.responsive.min.js'%}"></script>
<script src="{% static 'libs/datatables.net-responsive-bs4/js/responsive.bootstrap4.min.js'%}"></script>

<script>
$(document).ready(
    function(){
    for(var i=1;i<10;i++){
        // setTimeout(()=>{
            $("#datatable-buttons"+i).DataTable({lengthChange:!1,buttons:["excel","print"],rtl:true}).buttons().container().appendTo("#datatable-buttons"+i+"_wrapper .col-md-6:eq(0)"),$(".dataTables_length select").addClass("form-select form-select-sm")}
        // },1000)
    
});

</script>
{% endblock extra_js %}